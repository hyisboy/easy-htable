!function(e){var t={};function l(o){if(t[o])return t[o].exports;var c=t[o]={i:o,l:!1,exports:{}};return e[o].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=e,l.c=t,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)l.d(o,c,function(t){return e[t]}.bind(null,c));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t){!function(){let t={},l={};!function(){let e,l,o,c={},n=!0,i="",a={thead:{},tbody:{},width:400,sort:function(){},clickList:function(){},row:4};function s(e,t,l){let i="";if(t)for(const e in t)if(t.hasOwnProperty(e)){const l=t[e];i+=`<span title =${l.label} class = "${l.icon_class}"></span>`}let a="";e.forEach((e,t)=>{let l="<ul>",c=!1,s=!1;e.forEach((a,r)=>{let d="";if(n&&0==r?c=!0:0==r?s=!0:n&&r==e.length-1&&(d="operation htable-fixed-right-column "),r==e.length-1)l+=`<li class="operation ${d}" data-index="${t}">${i}<div class="popup"><div class="pop-cont"><span class="pop-hint">是否删除？</span><div class="pop-ft"><span class="pop-btn confirm">确认</span><span class="pop-btn cancel">取消</span></div></div></div></li>`;else if(c)console.log(a),l+=`<li class="htable-fixed-left-column recom-options" style="width:${o[r]}px"> <div class="htable-select select-item"><input type="checkbox"><span class="checkbox-icon checkbox-btn"></span></div>\n                        <div class="htable-id"><span>${a}</span></div></li>`,c=!1;else if(s)l+=`<li class=" recom-options" style="width:${o[r]}px"> <div class="htable-select select-item"><input type="checkbox"><span class="checkbox-icon checkbox-btn"></span></div>\n                            <div class="htable-id"><span>${a}</span></div></li>`,s=!1;else{let e,t=!1;a.length>=8&&a.split().forEach(e=>{escape(e).indexOf("%u")>=0&&(t=!0)}),t&&(d+=" over",e=`title="${a}"`),l+=`<li class="${d}" ${e} style="width:${o[r]}px"><span ">${a}</span></li>`}}),a+=l+="</ul>"});let s=c.querySelector(".htable-body");if(s.innerHTML=a,e.length>0)return c.querySelector(".htable-load").classList.remove("show"),void s.classList.add("show");c.querySelector(".htable-load-cont").innerText="暂无数据"}function r(e,t,o,n){if(t){let e=Array.prototype.slice.call(c.querySelectorAll(".asc")),t=Array.prototype.slice.call(c.querySelectorAll(".desc"));e.forEach(e=>{e.onclick=function(e){let t=(e||window.event).target||(e||window.event).srcElement;o("ASC",t.parentNode.getAttribute("data-name"))}}),t.forEach(e=>{e.onclick=function(e){let t=(e||window.event).target||(e||window.event).srcElement;o("DESC",t.parentNode.getAttribute("data-name"))}})}let i;e.forEach(e=>{let t=c.querySelectorAll("."+e.icon_class);t=Array.prototype.slice.call(t),"delete-icon"==e.icon_class&&(i=e.callback);let l=[];t.forEach((t,o,c)=>{let n=t.parentNode.lastChild;if(l.push(n),o>=c.length-2){let e="-40px";o==c.length-1&&(e="0"),n.style.top="initial",n.style.bottom=e}t.onclick=function(t){console.log("当前距离",n.parentNode.parentNode.offsetBottom);let o=+this.parentNode.getAttribute("data-index");if("delete-icon"==e.icon_class)return n.classList.add("show"),l.forEach(e=>{e!=n&&e.classList.remove("show")}),void t.stopPropagation();e.callback(t,this.parentNode.parentNode,a.tbody[o])}})});let s=c.querySelectorAll(".popup");function r(e,t){let l=t.nextElementSibling.classList;e?(l.remove("checkbox-icon"),l.add("checkbox-icon-active")):(l.remove("checkbox-icon-active"),l.add("checkbox-icon"))}(s=Array.prototype.slice.call(s)).forEach(e=>{e.onclick=function(e){e.stopPropagation()};let t=e.firstChild.firstChild.nextElementSibling;t.firstChild.onclick=function(t){let l=e.parentNode.getAttribute("data-index");i(t,e.parentNode.parentNode,a.tbody[l]),e.classList.remove("show")},t.lastChild.onclick=function(){e.classList.remove("show")}});let d=c.querySelectorAll(".select-item input"),p=c.querySelector(".select-all input");d=Array.prototype.slice.call(d),l=d,p.onchange=function(){let e=this.checked;r(e,this),d.forEach(t=>{t.checked=e,r(e,t)})},d.forEach(e=>{e.onclick=function(e){e.stopPropagation()},e.onchange=function(t){u(e),r(e.checked,e),t.stopPropagation()}});let h=c.querySelectorAll(".htable-body>ul");function u(e){if(p.checked)return p.checked=e.checked,void r(p.checked,p);let t=!1;try{d.forEach((e,l,o)=>{if(!(t=e.checked))throw new Error("终止循环");o.length-1==l&&(p.checked=!0,r(p.checked,p))})}catch(e){}}(h=Array.prototype.slice.call(h)).forEach((e,t)=>{e.onclick=l=>{if(a.clickList)a.clickList(e,n[t]),h.forEach(t=>{t==e?t.classList.add("ul-active"):t.classList.remove("ul-active")});else{let t=e.children[0].children[0].children[0];t.checked=!t.checked,u(t),r(t.checked,t)}l.stopPropagation()}})}t.init=function(t,l){if(console.log("init"),i=t,a=l,_props_length=0,console.log(a),!(c=document.querySelector(t)))return void console.log("元素未找到");o=function(e){let t=[];for(key in e)e.hasOwnProperty(key)&&t.push(e[key].width);return t}(l.thead);c.innerHTML='<div class="table-wrap">\n            <div class="htable">\n                 <div class="htable-head"></div>\n                 <div class="htable-load show"><div class="htable-load-cont">正在加载中.....</div></div>\n                 <div class="htable-body"></div>\n            </div>\n            </div>';let d="<ul>";for(const e in l.thead)if(l.thead.hasOwnProperty(e)){let t=l.thead[e].sort?`<div class="sort" data-name="${l.thead[e].name}"><span title="升序" class="asc asc-icon"></span><span title="降序" class="desc desc-icon"></span></div>`:"",o="";const c=l.thead[e];if(_props_length++,"left"==c.fixedColumn){d+=` <li class="htable-fixed-left-column recom-options"> <div class="htable-select select-all"><input type="checkbox"/><span class="checkbox-icon checkbox-btn"></span></div>\n                    <div class="htable-id"><span>${c.label}</span>${t}</div></li>`;continue}"right"==c.fixedColumn&&(o="htable-fixed-right-column"),d+=` <li class="${o}" style="width:${l.thead[e].width}px"><span>${c.label}</span>${t}</li>`}d+="</ul>",c.querySelector(".htable-head").innerHTML=d;let p=function(e){let t=0;return o.forEach(e=>t+=e),t}(),h=c.querySelector(".table-wrap"),u=c.querySelector(".htable-load"),f=c.querySelector(".htable-load-cont"),y=c.querySelector(".htable-body");h.style.width=a.width+"px",u.style.width=p+"px",console.log(a.tbody.length,a.row);let b=41*(a.row+.2)+"px";u.style.height=b,f.style.width=a.width+"px",f.style.height=b,f.style.lineHeight=b,y.style.height=b,h.style.height=41*(a.row+2)+"px";let g=c.querySelectorAll(".htable-head,.htable-body");(g=Array.prototype.slice.call(g)).forEach(e=>{e.style.width=p+"px"}),p<=a.width&&(n=!1,(e=c.querySelector(".htable")).style.overflowX="auto",e.querySelector(".htable-fixed-left-column").classList.remove("htable-fixed-left-column"),e.querySelector(".htable-fixed-right-column").classList.remove("htable-fixed-right-column"),g.forEach(e=>{e.style.paddingLeft=0})),s(a.tbody,a.oper,a.thead),r(a.oper,!0,a.sort,a.tbody)},t.loading=function(){let e=c.querySelector(".htable-body"),t=c.querySelector(".htable-load");c.querySelector(".htable-load-cont").innerText="正在加载...",t.classList.add("show"),e.classList.remove("show")},t.hiddenCheckbox=function(){let e=c.querySelectorAll(".htable-select");e=Array.prototype.slice.call(e),console.log("列表",e),e.forEach(e=>{e.style.display="none"})},t.getCheckedList=function(){let e=[];return c=document.querySelector(i),l=c.querySelectorAll(".select-item input"),(l=Array.prototype.slice.call(l)).forEach(t=>{if(!t.checked)return!1;let l=t.parentNode.parentNode.parentNode;if(console.log(l),"UL"==l.nodeName){let t=+l.lastChild.getAttribute("data-index"),o={data:a.tbody[t],ele:l};e.push(o)}}),e},t.setTableList=function(e){a.tbody=e,s(e,a.oper),r(a.oper,!1,a.sort,e)}}(),l.initPagination=function(e,t){let l=1,o=1,c=document.querySelector(e),n='<div class="pagination"><ul><li class="page-back page-item-node"><span class="page-icon jiantou-left-icon"></span></li>\n           <li class="page-list"><ul class="page-list-node">';for(let e=1;e<=t.pageTotal;e++){let l="";e==t.currentPage&&(l="active"),n+=`<li data-index="${e}" class="page-item-node item ${l}">${e}</li>`}n+=`</ul></li><li class="page-next page-item-node "><span class="page-icon jiantou-right-icon"></span></li><li class="page-detail">总计: ${t.pageTotal} 页</li></ul></div>`,c.innerHTML=n,function(e){let t=c.querySelector(".page-back"),n=c.querySelectorAll(".page-item-node.item");n=Array.prototype.slice.call(n);let i=c.querySelector(".page-next");function a(e,t){n[t-1].classList.remove("active"),n[e-1].classList.add("active")}t.addEventListener("click",function(){l=o,o=o>1?o-1:1,e.back(o),a(o,l)}),i.addEventListener("click",function(){l=o,o=o<e.pageTotal?o+1:e.pageTotal,e.next(o),a(o,l)}),n.forEach((t,c)=>{t.addEventListener("click",function(){l=o,o=c+1,e.item(t,c+1),a(o,l)})})}(t)},e.exports.htable=t,e.exports.hpagination=l}()}]);